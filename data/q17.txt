Q17) 
This query determines how much average yearly revenue would be lost if orders were no longer filled for small 
quantities of certain parts. This may reduce overhead expenses by concentrating sales on larger shipments. 
2.4.17.1 Business Question 
The Small-Quantity-Order Revenue Query considers parts of a given brand and with a given container type and 
determines the average lineitem quantity of such parts ordered for all orders (past and pending) in the 7-year data-
base. What would be the average yearly gross (undiscounted) loss in revenue if orders for these parts with a quantity 
of less than 20% of this average were no longer taken? 
2.4.17.2 Functional Query Definition 
select 
sum(l_extendedprice) / 7.0 as avg_yearly 
from  
lineitem,  
part 
where  
p_partkey = l_partkey 
and p_brand = '[BRAND]' 
and p_container = '[CONTAINER]' 
and l_quantity < ( 
select 
0.2 * avg(l_quantity) 
from  
lineitem 
where  
l_partkey = p_partkey 
); 
2.4.17.3 Substitution Parameters 
Values for the following substitution parameter must be generated and used to build the executable query text: 
1. BRAND = 'Brand#MN' where MN is a two character string representing two numbers randomly and indepen-
dently selected within [1 .. 5]; 
2. CONTAINER is randomly selected within the list of 2-syllable strings defined for Containers in Clause 
4.2.2.13. 
2.4.17.4 Query Validation 
For validation against the qualification database the query must be executed using the following values for substitu-
tion parameters and must produce the following output data: 
Values for substitution parameters: 
1. BRAND = Brand#23; 
2. CONTAINER = MED BOX. 
2.4.17.5 Sample Output 
 
 
  
  
AVG_YEARLY 
348406.05 
TPC BenchmarkTM H Standard Specification Revision 3.0.1 
Page 58 
2.4.18 
Large Volume Customer Query (